name: Build
on: push
jobs:
  build:
    name: build flutter web
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: subosito/flutter-action@v1
      with:
        flutter-version: '2.0.5'
    - run: flutter pub get
    - name: create firebase-config
      run: |
          echo $FIREBASE_CONFIG >> ./web/firebase-config.js
      shell: bash
      env:
        FIREBASE_CONFIG : ${{secrets.FIREBASE_CONFIG}}
    - run: flutter build web --web-renderer=html
    - uses: s0/git-publish-subdir-action@develop
      env:
        REPO: self
        BRANCH: gh-pages
        FOLDER: build/web
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}